<!DOCTYPE html><html><head>
<meta charset="UTF-8">
<title>larvij</title>	
<script src='common/AppLoader.js'></script>
<script src='src/libMy/utility/DetectIE.js'></script>



<script>

	/*var head = document.getElementsByTagName('head')[0];
		// eslint-disable 

		var sc3 = document.createElement('script');
		sc3.src = 'planer/utility/DetectIE.js';
		head.appendChild(sc3);*/

	var trace = window.console.log.bind(window.console);
	var tStyle
	var dcmParam;	
	var appLoader;
	var path="src/"
	var plus="?"+Math.random()
	var manifest = [
		{src: path + 'libMy/divLib.js' + plus},


		{src: path + 'libMy/divLib.js' + plus},
		{src: path + 'lib/jquery-1.11.3.js' + plus},
		{src: path + 'lib/pixi.js' + plus},	
		{src: path + 'lib/pixi.js' + plus},		
		{src: path + 'lib/pixi/filters/pixi-extra-filters.js' + plus},
		{src: path + 'lib/Font.js'+ plus},

		
		{src: path + 'lib/three99.js' + plus},
		{src: path + 'lib/shader/ShaderAll.js' + plus},
		{src: path + '/lib/tween.min.js' + plus},

		{src: path + 'component3d/BoxHelper.js' + plus},
		{src: path + 'lib/loaders/TDSLoader.js' + plus},
		{src: path + 'lib/loaders/inflate.min.js' + plus},
		{src: path + 'lib/loaders/FBXLoader.js' + plus},

		{src: path + 'lib/encoding.js' + plus},
		{src: path + 'lib/encoding-indexes.js' + plus},
		{src: path + 'lib/fileSaver.js' + plus},
		

		{src: path + 'lib/windows1251.js' + plus},

		{src: path + 'lib/loaders/GLTFLoader.js' + plus},

		{src: path + 'libMy/DragPic.js' + plus},
		{src: path + 'libMy/DragPic.js' + plus},
		{src: path + '/php/Php.js' + plus},
		{src: path + 'libMy/utility/Calc.js' + plus},
		{src: path + 'libMy/utility/Rectangle.js' + plus},
		{src: path + 'libMy/utility/TimeTest.js' + plus},
		
		{src: path + 'libMy/pl102/build/pl102.js' + plus},


		{src: path + 'lib/loaders/RGBELoader.js' + plus},

		{src: path + 'admin/menu/CubeMap.js' + plus},	
		{src: path + 'admin/menu/SceneSB.js' + plus},

		{src: path + 'larvij/scane2d/MenuSave.js' + plus},

		{src: path + 'libMy/t3d.js' + plus},

		{src: 'resources/font/SFUIDisplay-Bold.ttf', type:"FontFace", name:'SFUIDisplay-Bold'},		
    	{src: 'resources/font/SFUIDisplay-Light.ttf', type:"FontFace", name:'SFUIDisplay-Light'},



    	
		////////{src: 'resources/font/SFUIDisplay-Thin.ttf' + plus, type:"FontFace", name:'SFUIDisplay-Thin'},
		{src:'build/larvij.js' + plus}
	];

	if(window["Promise"]==undefined)manifest.push({src: path + "lib/bluebird.min.js"})


	var lMain,_detectIE
	function sizeWindow () {
		var w = document.documentElement.clientWidth;
		var h = document.documentElement.clientHeight;
		if (lMain) lMain.sizeWindow(w, h);		
		if (appLoader) appLoader.sizeWindow(w,h);

	}


	function init () {
		window.onresize = sizeWindow;


		_detectIE = new DetectIE(document.body,"/resources/image/ie.png");

		if (_detectIE.isWebGL() == false || _detectIE.getIEV() == false) {
			_detectIE.init();
			_detectIE.sizeWindow(document.documentElement.clientWidth, document.documentElement.clientHeight)
			sizeWindow();
			return;
		}
		
		
		



		appLoader = new AppLoader(
			"resources/image/pic3.png",
			'resources/image/pic4.png',
			manifest,
			function () {	
				/*var Promise = require('promise-polyfill').default;
  				trace(Promise)	*/

  				trace(windows1251)
				dcmParam = new DCM();
				tStyle=new TStyle();

					lMain=new LMain(function(s){
						if(s=="init"){
							appLoader.indicator.procent = 100;
							sizeWindow()
							
							//korektTrace()							
							
						}

					})				
					sizeWindow()

				
			},
			'resources/image/pic2.png',
			-85		
		)
		sizeWindow();	

		
	}

	function korektTrace () {
		var textarea = document.createElement('textarea')
		textarea.style.width=(400)+"px";
		textarea.style.height=(150)+"px";
		textarea.style.position = 'fixed';
		textarea.style.top = '0px';
		textarea.style.left = '0px';
		document.body.appendChild(textarea)	
		trace=function(s){			
			textarea.value=s+"\n"+textarea.value
		}

	}	

</script>

<style type="text/css">
	#stats { position: absolute; top:0; left: 200px; }
	/*@font-face {
	  font-family: "SFUIDisplay-Bold";
	  src: url(resources/font/SFUIDisplay-Bold.ttf) format("truetype");
	}
	@font-face {
	  font-family: "SFUIDisplay-Light";
	  src: url(resources/font/SFUIDisplay-Light.ttf) format("truetype");
	}*/	
</style>

</head>
<meta name="viewport" content="width=device-width,height=device-height,user-scalable=no user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
<body onload="init()"></body></html>